extern pxmatrix as mat

# Create a 3x3 matrix
m: mat.Matrix = mat.create(3, 3)

# Set some values
mat.set(m, 0, 0, 1.0)
mat.set(m, 1, 1, 5.0)
mat.set(m, 2, 2, 9.0)
mat.set(m, 0, 2, 3.0)

# Read back values
print(mat.get(m, 0, 0))
print(mat.get(m, 1, 1))
print(mat.get(m, 2, 2))
print(mat.get(m, 0, 2))

# Check dimensions
print(mat.rows(m))
print(mat.cols(m))

# Test that default values are zero
print(mat.get(m, 1, 0))

# Test creating a second matrix (verifies refcounting doesn't interfere)
m2: mat.Matrix = mat.create(2, 2)
mat.set(m2, 0, 0, 42.0)
print(mat.get(m2, 0, 0))

# Test None comparison
m3: mat.Matrix = None
if m3 == None
    print(1)
end
